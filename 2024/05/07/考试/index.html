<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>考试 | Hello</title><meta name="keywords" content="考试"><meta name="author" content="唐思嘉"><meta name="copyright" content="唐思嘉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="考试"><meta name="application-name" content="考试"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="考试"><meta property="og:url" content="http://example.com/2024/05/07/%E8%80%83%E8%AF%95/index.html"><meta property="og:site_name" content="Hello"><meta property="og:description" content="创建虚拟机点击新建虚拟机，选择稍后安装操作系统  没有图片的都是默认点继续  设置好以后点击设置  安装镜像文件  直接启动虚拟机，点击跳过       分配磁盘 &amp;#x2F;boot 200mb swap 400mb 剩余全部分配给&amp;#x2F; 建好以后进入登录页面关机，进入固件，将格式分为如下"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://pic4.zhimg.com/v2-6be8cc419c4945acd98736986d05e197_r.jpg"><meta property="article:author" content="唐思嘉"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pic4.zhimg.com/v2-6be8cc419c4945acd98736986d05e197_r.jpg"><meta name="description" content="创建虚拟机点击新建虚拟机，选择稍后安装操作系统  没有图片的都是默认点继续  设置好以后点击设置  安装镜像文件  直接启动虚拟机，点击跳过       分配磁盘 &amp;#x2F;boot 200mb swap 400mb 剩余全部分配给&amp;#x2F; 建好以后进入登录页面关机，进入固件，将格式分为如下"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2024/05/07/%E8%80%83%E8%AF%95/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"欢迎来到Tang的博客","backTitle":"欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://bzlza-twikoo.hf.space',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: {"apiurl":null},
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 唐思嘉","link":"链接: ","source":"来源: Hello","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Hello',
  title: '考试',
  postAI: '',
  pageFillDescription: '创建虚拟机, 配置网络, 连接XshellXftp, 虚拟机的克隆, host配置, 关闭防火墙, 关闭sshd让ssh连接更快, 关闭子安全系统, 通过yum下载vim, 下载ntp校准时间, 删除70net.rules文件, 拍快照克隆, 配置nginx, nginx的负载均衡, nginx session共享, 免密登录和zookeeper的安装配置, 四台服务器的免密, jdk安装与zookeeper启动, hadoop单机配置, hadoop的伪分布式多机配置, hadoop分布式多机配置, Hive 安装, Hive语法, hive的数据类型, 基础数据类型, 复杂数据类型, 创建表：, 查看表的详细信息：, Hive表的分区, 执行代码：, 单分区：, 双分区, Hbase的概述与安装, 1.存储方式和存储结构不同, 2.查询数据的方式不同, 数据模型, namespace：, Table：, row：, column：, cell：, time stamp：, hbase的基本架构, master：, RegionServer：, 安装流程：, Hbase常用命令创建虚拟机点击新建虚拟机选择稍后安装操作系统没有图片的都是默认点继续设置好以后点击设置安装镜像文件直接启动虚拟机点击跳过分配磁盘剩余全部分配给建好以后进入登录页面关机进入固件将格式分为如下保存即可配置网络输入进入配置修改等网络地址修改为如下这里修改为你的地址之间修改完成后使用启动网络服务这样虚拟机就可以进行网络访问了我们可以试着一下百度试试可以看见已经能够进行网络访问了但是在上操作还是有些让人苦恼的这时候我们就可以通过进行远程访问连接新建会话修改名称和主机号并且在用户验证页面输入用户名和密码同理虚拟机的克隆配置我们需要配置好虚拟机的文件为你的客机分配地址输入进入添加地址如下这是更改主机名的关闭防火墙输入查看开机启动项看防火墙开机是否启动可以看见防火墙的确启动了输入将防火墙关闭关闭让连接更快输入进入后输入搜索将改为取消注释保存即可关闭子安全系统输入查看子安全系统状态输入将改成通过下载为自带的文本编辑没有高亮因此下载通过进入更改文件将里面的内容改为再通过下载这时可能会出现的报错不用担心我们输入这里的是两个就解决问题了再次运行即可下载校准时间通过校准母机与子机的时间防止后面的集群出问题输入下载并且通过实现开机启动保证和实现开机启动删除文件访问删除文件即可再中似乎没有不用删除拍快照克隆首先远程关机点击快照管理拍摄快照即可克隆之前我们再创建四个文件夹来保存我们克隆机器的文件开机更改地址最后重启网络服务即可配置第一步安装能编译的源码包第二步下载支持协议的源码第三步下载解析正则表达式的源码第四步去官网下载安装包第五步解压下载好的安装包第六步配置其中是两个第七步编译同时进入因为没有这个文件所以要添加第八步运行脚本同时查看是否运行成功看是否有三个进程然后去你的浏览器输入网网址你的端口号的负载均衡是重启服务进入中的修改取消的注释并添加其中改为自己子机的并且每个子机下载服务修改中的文件没有就新建改为每个子机都改成自己子机的共享分别为号子机下载压缩包上传至解压文件在号子机导入架包导完以后在文件下修改文件在行导入注意地址修改为主机再返回进入修改内容修改为这些再子机完成以后在主机下载在进入中的修改加上端口号重启服务就可以了没安装的看下面的内容有安装免密登录和的安装配置四台服务器的免密免密登录首先我们需要先获取本机的公钥执行下列命令将公钥生成在文件中并且在你的所有服务器都要执行再执行下列命令将公钥的内容放在一个叫的文件中再去所有服务器的路径下将的内容全复制到的当中最后把含有所有机器公钥的文件分别拷贝给剩下的机器记得所有机器都要拷贝这样就完成了免密登录你也可以检查一下输入这里是接其他服务器的名字安装与启动将上传到其他三个服务器也要上传进目录安装在文件中配置环境变量如下并且将文件分别复制给其他服务器最后分别重启服务搭建集群将文件复制到哦服务器上解压到路径下删除文件中的配置配置上的环境变量加入如下代码将分别复制给并且重启服务在文件下找到将的文件名改为编辑修改路径在文件下添加文件修改内容为在上其他的对应并且在最后添加上参数节点再将整个文件复制给记得更改里面的不然会报错在三台服务器分别启动选择其中一台连接这样就完成了单机配置上传到解压配置环境变量删除里面的文件改的改指定副本数指定所在的位置改指定访问的时候路径的默认前缀指定的临时目录位置它会给以及的存储目录指定前缀改成自己的主机名格式化启动的伪分布式多机配置更改路径下的文件将其改成号主机名打开文件将指向号机同时更改副本数为保存后打开文件更改临时目录为保存并将整个文件发送给号主机以此类推最后配置号机环境变量加上的环境变量并配好和保存并复制给号机最后重新加载环境在号机上格式化最后启动即可端口号启动分布式多机配置进入号机路径将内容覆盖为指定每个服务器的位置和客户端端口号记得更改地址再将内容覆盖为指定副本的数量解析参数值的地址由以下两个支撑指定地址和端口号指定地址和端口号指定客户端查找的的策略会给所有发请求以决定哪个是的指定三台服务器的地址当出现故障时到对应的服务器将进程掉启动故障自动切换停止服务在号机运行号机器上启动在号机上启动将以上配置准备好以后就可以去号机上面去格式化了格式化以后去号机单独启动再去号机同步数据去号机启动集群进入号机去集群查看看是否有这个再去一号机启动服务在去集群看下是否有这两个文件有就是成功了再去网页启动主机名进去看是否是安装解压命令改名放入包将中的包分别放入中的记得把原来的删了进入到复制粘贴出来改名为将里面东西换为修改的环境变量之后输入进入记得命令打开和克隆机的网址保持状态打开你的数据库查看是否生成数据库将和环境变量传给克隆机修改第二台的在地址后面的修改为修改第三台的覆盖为语法数据库名数据库名的数据类型基础数据类型布尔个字节的带符号的整数个字节带符号的整数个字节带符号的整数个字节的单精度浮点数字节的双精度浮点数任意精度带符号的小数字符串变长的字符串固定长度的字符串日期时间戳精确到毫秒复杂数据类型数组键值对类型要规定里的和的数据类型结构体类型相当于一个只有属性没有方法的一个类创建表唯一标识姓名爱好住址查看表的详细信息表名表的分区执行代码增加分区并加入数据删除分区增加分区但不加入数据删除分区中的数据单分区唯一标识姓名爱好住址双分区唯一标识姓名爱好住址的概述与安装是以为数据存储的一种分布式的非关系型的可扩展的数据库关系型数据库和非关系型数据库的区别存储方式和存储结构不同关系型数据库是以二维表格的形式来存储数据这样的存储结构比较固定规整查询数据的方式不同关系型数据库是通过语句来对表中的数据进行精确查询非关系型数据库只能通过的检索来对数据进行查询分别的优势关系型数据库对于一些比较复杂的查询可以更加准确非关系型数据库最大的优势就是速度快效率高但是准确度和安全度没那么高适用于大规模的数据读写常用的关系型数据库常用的非关系型数据库数据模型命名空间类似与里面的的概念每个可以有多张表自带两个命名空间里面存放的是的内置表是用户默认使用的命名空间类似于里的表的概念但是不是二维表他定义的时候只需要声明他的列族就可以了不需要去声明列因为在写入数据的时候字段是动态的按你当下的需求来制定所以能够轻松的应对字段变更的场景的中每行数据都是由一个对应多个列来组成的他存储的数据是按照的字典顺序来存储的所以他在查询的时候是去检索来查询的一个表可以理解成行的集合行记录是列族的集合列族是列的集合的基本数据模型是是一个表格的单元用于存储数据每一行都有一个唯一的行键用于标识它行键由一个或多个列族组成列族是一组相关列的集合列族中的每一列都有一个唯一的列名用于标识它这个是用于标识数据的不同版本以及每条列的写入时间当某条数据写入的时候系统会默认给他加上该字段这个字段的值就是该数据写入的时间的基本架构部署在的上负责监控集群当中所有的管理元数据表格接收用户对表格创建修改删除等等命令并且执行它还可以监控是否需要负载均衡还可以进行故障转移因为他的实现类为所以在服务器上的进程名字就是通常部署在上主要的作用是负责对的处理比如数据的等等安装流程在中下载到命令将名字修改简短一点例如进删除配置环境变量进中的将修改为出来输入修改文件发给你直接覆盖到中找到复制到中的修改中的传到然后到上修改环境变量传到到中分别一下回到启动启动到另外其中一台启动查看是否包含到浏览器中打开浏览器中连接到便成功常用命令链接的客户端创建表表名列族名插入数据表名列族名列名值查询某一条数据表名列族名列名查询表里数据的总条数表名删除一条数据表名列族名列名在确定删除某张表的时候必须先去把该表禁用了表名然后再去删除才能成功表名查询表里所有的数据表名添加一个新的列族表名列族名',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-12 20:15:53',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://bu.dusays.com/2024/05/03/663466c445a5b.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_63165470?type=blog" title="个人博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="个人博客"/><span class="back-menu-item-text">个人博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://7bu.top/" title="个人图床"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="个人图床"/><span class="back-menu-item-text">个人图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Hello</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://bu.dusays.com/2024/05/03/6634c10294d31.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://bu.dusays.com/2024/05/03/6634c10294d31.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://bu.dusays.com/2024/05/03/6634c10292e7f.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://bu.dusays.com/2024/05/03/6634c10292e7f.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Hbase/" style="font-size: 1.05rem;">Hbase<sup>1</sup></a><a href="/tags/nginx/" style="font-size: 1.05rem;">nginx<sup>1</sup></a><a href="/tags/%E4%BD%9C%E4%B8%9A/" style="font-size: 1.05rem;">作业<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 1.05rem;">测试<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.05rem;">爬虫<sup>1</sup></a><a href="/tags/%E8%80%83%E8%AF%95/" style="font-size: 1.05rem;">考试<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%B6%AF/" itemprop="url">大学生涯</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E8%80%83%E8%AF%95/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>考试</span></a></span></div></div><h1 class="post-title" itemprop="name headline">考试</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-05-07T06:39:47.000Z" title="发表于 2024-05-07 14:39:47">2024-05-07</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-05-12T12:15:53.094Z" title="更新于 2024-05-12 20:15:53">2024-05-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span id="" data-flag-title="考试"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2024/05/07/%E8%80%83%E8%AF%95/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://pic4.zhimg.com/v2-6be8cc419c4945acd98736986d05e197_r.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/05/07/%E8%80%83%E8%AF%95/"><header><a class="post-meta-categories" href="/categories/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%B6%AF/" itemprop="url">大学生涯</a><a href="/tags/%E8%80%83%E8%AF%95/" tabindex="-1" itemprop="url">考试</a><h1 id="CrawlerTitle" itemprop="name headline">考试</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">唐思嘉</span><time itemprop="dateCreated datePublished" datetime="2024-05-07T06:39:47.000Z" title="发表于 2024-05-07 14:39:47">2024-05-07</time><time itemprop="dateCreated datePublished" datetime="2024-05-12T12:15:53.094Z" title="更新于 2024-05-12 20:15:53">2024-05-12</time></header><h3 id="创建虚拟机"><a href="#创建虚拟机" class="headerlink" title="创建虚拟机"></a>创建虚拟机</h3><p>点击新建虚拟机，选择稍后安装操作系统</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b0c9cb359.png"></p>
<p>没有图片的都是默认点继续</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b0cec3b05.png"></p>
<p>设置好以后点击设置</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b0d408945.png"></p>
<p>安装镜像文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b0d8ac012.png"></p>
<p>直接启动虚拟机，点击跳过</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b0ddeb437.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b1ba249c1.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b1baed12d.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b2206a6c1.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b22063157.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/12/6640b22063114.png"></p>
<p>分配磁盘</p>
<p>&#x2F;boot 200mb</p>
<p>swap 400mb</p>
<p>剩余全部分配给&#x2F;</p>
<p>建好以后进入登录页面关机，进入固件，将格式分为如下</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/07/6639d959d1cff.png" alt="配置图" title="配置图"> </p>
<p>F10保存即可</p>
<h3 id="配置网络"><a href="#配置网络" class="headerlink" title="配置网络"></a>配置网络</h3><p>输入vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth0</p>
<p>进入配置修改ip等网络地址，修改为如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NM_CONTROLLED=yes</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.2.201  &lt;------这里修改为你的ip地址128~254之间</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.2.2</span><br><span class="line">DNS1=192.168.2.2</span><br><span class="line">DNS2=114.114.114.114</span><br></pre></td></tr></table></figure>

<p>修改完成后使用</p>
<p>service network  restart 启动网络服务</p>
<p>这样虚拟机就可以进行网络访问了，我们可以试着ping一下百度试试</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/07/6639de868ccf2.png" alt="测试图"></p>
<p>可以看见已经能够进行网络访问了，但是在vm上操作还是有些让人苦恼的，这时候我们就可以通过Xshell进行远程访问</p>
<h3 id="连接Xshell，Xftp"><a href="#连接Xshell，Xftp" class="headerlink" title="连接Xshell，Xftp"></a>连接Xshell，Xftp</h3><p>新建会话，修改名称和主机号</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/07/6639df711a24c.png"></p>
<p>并且在</p>
<p>用户验证页面输入用户名和密码<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/07/6639e01413841.png"></p>
<p>Xftp同理</p>
<h3 id="虚拟机的克隆"><a href="#虚拟机的克隆" class="headerlink" title="虚拟机的克隆"></a>虚拟机的克隆</h3><h4 id="host配置"><a href="#host配置" class="headerlink" title="host配置"></a>host配置</h4><p>我们需要配置好虚拟机的host文件，为你的客机分配地址</p>
<p>输入vi &#x2F;etc&#x2F;hosts进入，添加地址，如下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/07/6639e1eb8b300.png"></p>
<p>（vim &#x2F;etc&#x2F;sysconfig&#x2F;network 这是更改主机名的）</p>
<h4 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h4><p>输入chkconfig查看开机启动项，看防火墙开机是否启动</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/07/6639e2eee9921.png"></p>
<p>可以看见防火墙的确启动了</p>
<p>输入chkconfig iptables off将防火墙关闭</p>
<h4 id="关闭sshd让ssh连接更快"><a href="#关闭sshd让ssh连接更快" class="headerlink" title="关闭sshd让ssh连接更快"></a>关闭sshd让ssh连接更快</h4><p>输入vi &#x2F;etc&#x2F;ssh&#x2F;sshd_config</p>
<p>进入后输入&#x2F;搜索UseDNS将yes改为no，取消注释保存即可</p>
<h4 id="关闭子安全系统"><a href="#关闭子安全系统" class="headerlink" title="关闭子安全系统"></a>关闭子安全系统</h4><p>输入gettenforce查看子安全系统状态</p>
<p>输入vi &#x2F;etc&#x2F;selinux&#x2F;config将enforcing改成disabled</p>
<h4 id="通过yum下载vim"><a href="#通过yum下载vim" class="headerlink" title="通过yum下载vim"></a>通过yum下载vim</h4><p>vi为linux自带的文本编辑没有高亮，因此下载vim</p>
<p>通过xftp进入&#x2F;etc&#x2F;yum.repos.d</p>
<p>更改centos-base.repo文件，将里面的内容改为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"># CentOS-Base.repo</span><br><span class="line">#</span><br><span class="line"># The mirror system uses the connecting IP address of the client and the</span><br><span class="line"># update status of each mirror to pick mirrors that are updated to and</span><br><span class="line"># geographically close to the client.  You should use this for CentOS updates</span><br><span class="line"># unless you are manually picking other mirrors.</span><br><span class="line">#</span><br><span class="line"># If the mirrorlist= does not work for you, as a fall back you can try the </span><br><span class="line"># remarked out baseurl= line instead.</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"> </span><br><span class="line">[base]</span><br><span class="line">name=CentOS-$releasever - Base - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos-vault/centos/$releasever/os/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/os/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/os/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos-vault/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"> </span><br><span class="line">#released updates </span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-$releasever - Updates - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos-vault/centos/$releasever/updates/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/updates/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/updates/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos-vault/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"> </span><br><span class="line">#additional packages that may be useful</span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-$releasever - Extras - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos-vault/centos/$releasever/extras/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/extras/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/extras/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos-vault/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"> </span><br><span class="line">#additional packages that extend functionality of existing packages</span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-$releasever - Plus - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos-vault/centos/$releasever/centosplus/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/centosplus/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/centosplus/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos-vault/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"> </span><br><span class="line">#contrib - packages by Centos Users</span><br><span class="line">[contrib]</span><br><span class="line">name=CentOS-$releasever - Contrib - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos-vault/centos/$releasever/contrib/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/contrib/$basearch/</span><br><span class="line">        http://mirrors.aliyun.com/centos-vault/centos/$releasever/contrib/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos-vault/centos/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure>

<p>再通过yum -y install vim 下载</p>
<p>这时可能会出现”The requested URL returned error: 404 Not Found”的报错，不用担心我们输入rpm –import &#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM*(这里的–是两个-) 就解决问题了再次运行yum -y install vim即可</p>
<h4 id="下载ntp校准时间"><a href="#下载ntp校准时间" class="headerlink" title="下载ntp校准时间"></a>下载ntp校准时间</h4><p>通过ntp校准母机与子机的时间，防止后面的hadoop集群出问题</p>
<p>输入yum -y install ntp下载ntp</p>
<p>并且通过chkconfig实现开机启动</p>
<p>保证ntpd和ntpdate实现开机启动</p>
<h4 id="删除70net-rules文件"><a href="#删除70net-rules文件" class="headerlink" title="删除70net.rules文件"></a>删除70net.rules文件</h4><p>访问&#x2F;etc&#x2F;udev&#x2F;rules.d 删除文件即可（再centos7中似乎没有，不用删除）</p>
<h4 id="拍快照克隆"><a href="#拍快照克隆" class="headerlink" title="拍快照克隆"></a>拍快照克隆</h4><p>首先init 0远程关机</p>
<p>点击快照管理，拍摄快照即可</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/07/6639ec4f0e359.png"></p>
<p>克隆之前我们再创建四个文件夹来保存我们克隆机器的文件。</p>
<p>开机更改IP地址最后重启网络服务即可。</p>
<h3 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h3><p>第一步安装能编译nginx的源码包</p>
<p>yum install gcc gcc-c++ -y</p>
<p> 第二步下载支持http协议的源码 </p>
<p>yum install openssl openssl-devel -y </p>
<p>第三步下载解析正则表达式的源码 </p>
<p>yum install pcre pcre-devel -y </p>
<p>第四步去nginx官网下载安装包 </p>
<p>第五步解压下载好的安装包 </p>
<p>tar -zxvf nginx-1.16.1.tar.gz  </p>
<p>第六步配置 </p>
<p>cd &#x2F;opt&#x2F;apps&#x2F;nginx-1.16.1 </p>
<p>.&#x2F;configure –prefix&#x3D;&#x2F;opt&#x2F;nginx (其中–是两个-s)</p>
<p>第七步编译nginx </p>
<p>make </p>
<p>make install </p>
<p>同时进入&#x2F;etc&#x2F;init.d&#x2F;nginx,因为没有这个文件所以要添加</p>
<p>第八步运行nginx脚本 </p>
<p>cd &#x2F;opt&#x2F;nginx cd sbin&#x2F; </p>
<p>.&#x2F;nginx </p>
<p>同时service nginx start</p>
<p>查看是否运行成功 </p>
<p>ps aux|grep nginx 看是否有三个进程· </p>
<p>然后去你的浏览器输入网网址</p>
<p> ttp:&#x2F;&#x2F;＋你的端口号 </p>
<h3 id="nginx的负载均衡"><a href="#nginx的负载均衡" class="headerlink" title="nginx的负载均衡"></a>nginx的负载均衡</h3><p>service nginx reload是重启服务</p>
<p>进入&#x2F;opt&#x2F;nginx&#x2F;conf中的nginx.conf修改</p>
<p>取消gzip的注释，并添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">   upstream rss&#123;</span><br><span class="line">       server 192.168.2.211;</span><br><span class="line">       server 192.168.2.212;</span><br><span class="line">server 192.168.2.213;</span><br><span class="line">server 192.168.2.214;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   server &#123;</span><br><span class="line">       listen  80;</span><br><span class="line">       server_name www.1234.com;</span><br><span class="line">       access_log logs/host.lmn.log myformat;</span><br><span class="line">       location / &#123;</span><br><span class="line">           root /etc;</span><br><span class="line">           autoindex on;</span><br><span class="line">       &#125;</span><br><span class="line">   location /xo &#123;</span><br><span class="line">           proxy_pass http://192.168.2.211/;</span><br><span class="line">      &#125;</span><br><span class="line">   location /xoo &#123;</span><br><span class="line">           proxy_pass http://www.baidu.com/;</span><br><span class="line">      &#125;</span><br><span class="line">   location /toms &#123;</span><br><span class="line">          proxy_pass http://rss/;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>其中改为自己子机的ip</p>
<p>并且每个子机yum下载httpd服务</p>
<p>yum install httpd -y</p>
<p>修改var&#x2F;www&#x2F;html中的index.html文件，没有就新建</p>
<p>改为from 192.168.2.212，每个子机都改成自己子机的</p>
<h3 id="nginx-session共享"><a href="#nginx-session共享" class="headerlink" title="nginx session共享"></a>nginx session共享</h3><p>分别为234号子机下载apach压缩包上传至&#x2F;opt&#x2F;apps</p>
<p>解压apach文件</p>
<p>tar -zxvf apache-tomcat-7.0.69.tar.gz -C &#x2F;opt&#x2F;</p>
<p>在2号子机导入lib架包，导完以后在conf文件下修改context.xml文件，在28行导入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Manager className=&quot;de.javakaffee.web.msm.MemcachedBackupSessionManager&quot; </span><br><span class="line">	memcachedNodes=&quot;n1:192.168.2.211:11211&quot; </span><br><span class="line">    sticky=&quot;false&quot; </span><br><span class="line">    lockingMode=&quot;auto&quot;</span><br><span class="line">    sessionBackupAsync=&quot;false&quot;</span><br><span class="line">	requestUriIgnorePattern=&quot;.*\.(ico|png|gif|jpg|css|js)$&quot;</span><br><span class="line">    sessionBackupTimeout=&quot;1000&quot; transcoderFactoryClass=&quot;de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory&quot; </span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p>注意地址修改为主机ip</p>
<p>再返回进入&#x2F;opt&#x2F;apache-tomcat-7.0.69&#x2F;webapps&#x2F;ROOT，修改index.jps</p>
<p>内容修改为from 192.168.2.212 session&#x3D;&lt;%&#x3D;session.getId()%&gt;</p>
<p>这些再子机完成以后，在主机下载</p>
<p>yum install libevent -y</p>
<p>yum install memcached  -y</p>
<p>memcached -d -m 128m -p 11211 -l 192.168.2.211 -u root -P &#x2F;opt&#x2F;mpid</p>
<p>在nginx进入&#x2F;opt&#x2F;nginx&#x2F;conf中的nginx.conf修改加上端口号8080</p>
<p>重启nginx服务就可以了</p>
<p>jdk没安装的看下面zookeeper的内容有jdk安装</p>
<h3 id="免密登录和zookeeper的安装配置"><a href="#免密登录和zookeeper的安装配置" class="headerlink" title="免密登录和zookeeper的安装配置"></a>免密登录和zookeeper的安装配置</h3><h4 id="四台服务器的免密"><a href="#四台服务器的免密" class="headerlink" title="四台服务器的免密"></a>四台服务器的免密</h4><p>免密登录首先我们需要先获取本机的公钥，执行下列命令</p>
<p>ssh-keygen -t dsa -P ‘’ -f ~&#x2F;.ssh&#x2F;id_dsa 将公钥生成在.ssh文件中</p>
<p>并且在你的所有服务器都要执行</p>
<p>再执行下列命令将公钥的内容放在一个叫authorized_keys 的文件中</p>
<p>cat ~&#x2F;.ssh&#x2F;id_dsa.pub &gt;&gt; ~&#x2F;.ssh&#x2F;authorized_keys</p>
<p>再去所有服务器的.ssh路径下，将id_dsa的内容全复制到KS1的authorized_keys当中，最后把含有所有机器公钥的文件分别拷贝给剩下的机器</p>
<p>scp ~&#x2F;.ssh&#x2F;authorized_keys  node2:&#x2F;root&#x2F;.ssh&#x2F; 记得所有机器都要拷贝，这样就完成了免密登录,你也可以检查一下输入</p>
<p>ssh KS4这里是接其他服务器的名字</p>
<h4 id="jdk安装与zookeeper启动"><a href="#jdk安装与zookeeper启动" class="headerlink" title="jdk安装与zookeeper启动"></a>jdk安装与zookeeper启动</h4><p>将jdk-8u221-linux-x64.rpm上传到KS1&#x2F;opt&#x2F;apps其他三个服务器也要上传</p>
<p>cd进目录&#x2F;opt&#x2F;apps安装jdk</p>
<p>rpm -ivh jdk-8u221-linux-x64.rpm  </p>
<p>在profile文件中配置环境变量如下</p>
<p>export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;default</p>
<p>export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin</p>
<p>并且将profile文件分别复制给其他服务器</p>
<p>最后分别重启服务</p>
<p>source &#x2F;etc&#x2F;profile</p>
<p>搭建zookeeper集群</p>
<p>将zookeeper文件复制到哦ks2服务器上，解压到opt路径下</p>
<p>tar -zxvf zookeeper-3.4.6.tar.gz -C &#x2F;opt</p>
<p>删除文件中的docs配置</p>
<p>rm -rf docs&#x2F;</p>
<p>配置ks2上的环境变量加入如下代码</p>
<p>export ZOOKEEPER_HOME&#x3D;&#x2F;opt&#x2F;zookeeper-3.4.6</p>
<p>export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin:$ZOOKEEPER_HOME&#x2F;bin</p>
<p>将profile分别复制给ks3，ks4，并且重启profile服务</p>
<p>在zookeeper文件下找到conf，将zoo—的文件名改为zoo.cfg</p>
<p>编辑修改路径</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/09/663cbe38c0500.png"></p>
<p>在data文件下添加myid文件，修改内容为1（在ks2上）其他的对应2，3</p>
<p>并且在最后添加上参数节点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/09/663cbebaa370b.png"></p>
<p>再将整个zookeeper文件复制给ks3，ks4</p>
<p>scp -r zookeeper-3.4.6&#x2F; KS3:&#x2F;opt&#x2F;</p>
<p>记得更改里面的myid不然会报错</p>
<p>在三台服务器分别启动</p>
<p>zkServer.sh start  </p>
<p>选择其中一台连接zookeeper</p>
<p>zkCli.sh  这样就完成了</p>
<h3 id="hadoop单机配置"><a href="#hadoop单机配置" class="headerlink" title="hadoop单机配置"></a>hadoop单机配置</h3><p>上传hadoop-2.6.5.tar.gz到opt&#x2F;apps</p>
<p>解压        tar -zxvf hadoop-2.6.5.tar.gz -C &#x2F;opt  </p>
<p>配置环境变量 vim &#x2F;etc&#x2F;profile</p>
<p>export HADOOP_HOME&#x3D;&#x2F;opt&#x2F;hadoop-2.6.5</p>
<p>export PATH&#x3D;$PATH:$HADOOP_HOME&#x2F;bin:$HADOOP_HOME&#x2F;sbin</p>
<p>source &#x2F;etc&#x2F;profile</p>
<p>删除&#x2F;opt&#x2F;hadoop-2.6.5&#x2F;share里面的doc文件</p>
<p>改&#x2F;opt&#x2F;hadoop-2.6.5&#x2F;etc&#x2F;hadoop的hadoop-env.sh</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/10/663ddd0a2a681.png"></p>
<p>&#x2F;usr&#x2F;java&#x2F;default</p>
<p>改hdfs-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 指定block副本数 --&gt;</span><br><span class="line"></span><br><span class="line"> &lt;property&gt;</span><br><span class="line"></span><br><span class="line">&lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">&lt;value&gt;1&lt;/value&gt;</span><br><span class="line"></span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 指定secondarynamenode所在的位置 --&gt;</span><br><span class="line"></span><br><span class="line"> &lt;property&gt;</span><br><span class="line"></span><br><span class="line">&lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">&lt;value&gt;node1:50090&lt;/value&gt;</span><br><span class="line"></span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>改core-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 指定访问HDFS的时候路径的默认前缀 / hdfs://node1:9000/ --&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line"></span><br><span class="line"> &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line"></span><br><span class="line"> &lt;value&gt;hdfs://node1:9000&lt;/value&gt;</span><br><span class="line"></span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 指定hadoop的临时目录位置，它会给namenode、secondarynamenode以及datanode的存储目录指定前缀 --&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line"></span><br><span class="line"> &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line"></span><br><span class="line"> &lt;value&gt;/var/bjsxt/hadoop/pseudo&lt;/value&gt;</span><br><span class="line"></span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>改slaves成自己的主机名</p>
<p>格式化namenode</p>
<p>hdfs namenode -format  </p>
<p>启动Hadoop</p>
<p>tart-dfs.sh  </p>
<h3 id="hadoop的伪分布式多机配置"><a href="#hadoop的伪分布式多机配置" class="headerlink" title="hadoop的伪分布式多机配置"></a>hadoop的伪分布式多机配置</h3><p>更改&#x2F;opt&#x2F;hadoop-2.6.5&#x2F;etc&#x2F;hadoop路径下的slaves文件，将其改成2，3，4号主机名</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/10/663ddff3322cd.png"></p>
<p>打开hdfs文件将econdarynamenode指向2号机，同时更改副本数为2</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/10/663de053446c5.png"></p>
<p>保存后打开core-site文件，更改hadoop临时目录为&#x2F;var&#x2F;caijing&#x2F;hadoop&#x2F;full</p>
<p>保存，并将整个hadoop文件发送给2，3，4号主机</p>
<p>scp -r &#x2F;opt&#x2F;hadoop-2.6.5 KS2:&#x2F;opt&#x2F;</p>
<p>以此类推</p>
<p>最后配置2号机环境变量</p>
<p>加上hadoop的环境变量，并配好bin和sbin</p>
<p>export HADOOP_HOME&#x3D;&#x2F;opt&#x2F;hadoop-2.6.5<br>export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin:$ZOOKEEPER_HOME&#x2F;bin:$PATH:$HADOOP_HOME&#x2F;bin:$HADOOP_HOME&#x2F;sbin</p>
<p>保存并复制给3，4号机，最后重新加载环境</p>
<p>在1号机上格式化namenode</p>
<p>hdfs namenode -format</p>
<p>最后启动hadoop即可</p>
<p>start-dfs.sh</p>
<p>端口号:50070启动</p>
<h3 id="hadoop分布式多机配置"><a href="#hadoop分布式多机配置" class="headerlink" title="hadoop分布式多机配置"></a>hadoop分布式多机配置</h3><p>进入1号机&#x2F;opt&#x2F;hadoop-2.6.5&#x2F;etc&#x2F;hadoop路径</p>
<p>将core内容覆盖为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;hdfs://mycluster&lt;/value&gt;   </span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">	&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;/var/caijing/hadoop/ha&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;!-- 指定每个zookeeper服务器的位置和客户端端口号 --&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">	 &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;</span><br><span class="line">	 &lt;value&gt;node2:2181,node3:2181,node4:2181&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>记得更改地址</p>
<p>再将hdfs-site内容覆盖为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 指定副本的数量 --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;2&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!-- 解析参数dfs.nameservices值hdfs://mycluster的地址 --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.nameservices&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;mycluster&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!-- mycluster由以下两个namenode支撑 --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.ha.namenodes.mycluster&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;nn1,nn2&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!-- 指定nn1地址和端口号  --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.namenode.rpc-address.mycluster.nn1&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;node1:8020&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!-- 指定nn2地址和端口号  --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.namenode.rpc-address.mycluster.nn2&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;node2:8020&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!-- 指定客户端查找active的namenode的策略：</span><br><span class="line">      	       	  会给所有namenode发请求，以决定哪个是active的 --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.client.failover.proxy.provider.mycluster&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!-- 指定三台journal node服务器的地址 --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;qjournal://node1:8485;node2:8485;node3:8485/mycluster&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;/var/caijing/hadoop/ha/jnn&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!-- 当active nn出现故障时，ssh到对应的服务器，将namenode进程kill掉  --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;sshfence&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;/root/.ssh/id_dsa&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br><span class="line"> &lt;!--启动NN故障自动切换 --&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">   &lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;true&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>停止hadoop服务</p>
<p>在1号机运行stop-all.sh</p>
<p>234号机器上启动zookeeper</p>
<p>zkServer.sh start</p>
<p>在123号机上启动journalnode</p>
<p>hadoop-daemon.sh start journalnode</p>
<p>将以上配置准备好以后就可以去1号机上面去格式化namenode了</p>
<p>hdfs namenode -format</p>
<p>格式化以后去1号机单独启动namenode</p>
<p>hadoop-daemon.sh start namenode</p>
<p>再去2号机同步数据</p>
<p>hdfs namenode -bootstrapStandby</p>
<p>去4号机启动集群</p>
<p>zkCli.sh</p>
<p>进入1号机</p>
<p>hdfs zkfc -formatZK</p>
<p>去集群</p>
<p>ls查看，看是否有mycluster这个</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/11/663f70722d6d4.png"></p>
<p>再去一号机启动hapdoop服务</p>
<p>start-dfs.sh</p>
<p>在去集群看mycluster下是否有这两个文件，有就是成功了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/11/663f71068f183.png"></p>
<p>再去网页启动主机名:50070进去看是否是active</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/11/663f715821360.png"></p>
<h2 id="Hive-安装"><a href="#Hive-安装" class="headerlink" title="Hive 安装"></a>Hive 安装</h2><p>解压1.2.1</p>
<p>mv命令改名</p>
<p>放入jar包mysql-connector</p>
<p>将lib中的jline-2.12jar包分别放入node1 2 3 4中的&#x2F;opt&#x2F;hadoop-2.6.5&#x2F;share&#x2F;hadoop&#x2F;yarn&#x2F;lib 记得把原来的删了</p>
<p>进入到hive conf复制hive-default.xml.templete粘贴出来改名为hive-site.xml   cp hive-default.xml.templete hive-site.xml</p>
<p>将里面东西换为</p>
<hr>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?><!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<configuration>
<property>
    <name>hive.metastore.warehouse.dir</name>
    <value>/user/hive/warehouse</value>
    </property>
   <property>
          <name>javax.jdo.option.ConnectionURL</name>
          <value>jdbc:mysql://192.168.159.202:3306/hive?createDatabaseIfNotExist=true</value>
          <description>JDBC connect string for a JDBC metastore</description>
        </property>

<pre><code>    &lt;property&gt;
      &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
      &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
      &lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
      &lt;value&gt;root&lt;/value&gt;
      &lt;description&gt;username to use against metastore database&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
      &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
      &lt;value&gt;002582&lt;/value&gt;
      &lt;description&gt;password to use against metastore database&lt;/description&gt;
    &lt;/property&gt;
</code></pre>
</configuration>

<hr>
<p>修改zhuji的环境变量</p>
<p>source之后输入hive进入（记得命令打开hadoop和克隆机的zookeeper，网址保持active状态）</p>
<p>打开你的数据库（navicat查看是否生成hive数据库</p>
<p>将hive和环境变量传给克隆机</p>
<p>修改第二台的hive-site.xml 在地址后面的hive？修改为hive_remote?</p>
<p>修改第三台的hive-site.xml 覆盖为：</p>
<hr>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?><!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<configuration>
<property>
        <name>hive.metastore.warehouse.dir</name>
        <value>/user/hive/warehouse</value>
    </property>
    <property>
        <name>hive.metastore.uris</name>
        <value>thrift://192.168.159.204:9083</value>
    </property>

</configuration>

<hr>
<h2 id="Hive语法"><a href="#Hive语法" class="headerlink" title="Hive语法"></a>Hive语法</h2><p>create database 数据库名;</p>
<p>show databases;</p>
<p>drop database 数据库名</p>
<h4 id="hive的数据类型"><a href="#hive的数据类型" class="headerlink" title="hive的数据类型"></a>hive的数据类型</h4><h5 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型:"></a>基础数据类型:</h5><p>boolean 布尔</p>
<p>tinyint 1个字节的带符号的整数</p>
<p>int 4个字节带符号的整数</p>
<p>bigint 8个字节带符号的整数</p>
<p>float 4个字节的单精度浮点数</p>
<p>double 8字节的双精度浮点数</p>
<p>decimal 任意精度带符号的小数</p>
<p>string 字符串</p>
<p>varchar 变长的字符串</p>
<p>char 固定长度的字符串</p>
<p>date 日期</p>
<p>timestamp 时间戳 精确到毫秒</p>
<h5 id="复杂数据类型"><a href="#复杂数据类型" class="headerlink" title="复杂数据类型:"></a>复杂数据类型:</h5><p>array<data_type>数组</p>
<p>map&lt;string.double&gt;键值对类型（要规定map里的key和value的数据类型）</p>
<p>struct 结构体类型（相当于一个只有属性没有方法的一个类）person&lt;col name;string ,col age int ,address:double&gt;</p>
<h4 id="创建表："><a href="#创建表：" class="headerlink" title="创建表："></a>创建表：</h4><p>create external table person(<br>id int comment ‘唯一标识’,<br>name string comment ‘姓名’,<br>likes array<string>comment ‘爱好’,<br>address map&lt;string,string&gt; comment ‘住址’<br>)<br>row format delimited<br>fields terminated by “,”<br>collection items terminated by “-“<br>map keys terminated by “:”<br>lines terminated by “\n”</p>
<p>location ‘&#x2F;menu&#x2F;person’;</p>
<h4 id="查看表的详细信息："><a href="#查看表的详细信息：" class="headerlink" title="查看表的详细信息："></a>查看表的详细信息：</h4><p>desc formatted 表名</p>
<h2 id="Hive表的分区"><a href="#Hive表的分区" class="headerlink" title="Hive表的分区"></a>Hive表的分区</h2><h5 id="执行代码："><a href="#执行代码：" class="headerlink" title="执行代码："></a>执行代码：</h5><p>load data local inpath ‘&#x2F;opt&#x2F;person.txt’ into table person2 partition (age&#x3D;1,sex&#x3D;”ma”);增加分区并加入数据</p>
<p>alter table person2 drop partition(sex&#x3D;”ma”); 删除分区</p>
<p>alter table person2 add partition(sex&#x3D;”man”,age&#x3D;1); 增加分区但不加入数据</p>
<p>truncate table person1;删除分区中的数据</p>
<h5 id="单分区："><a href="#单分区：" class="headerlink" title="单分区："></a>单分区：</h5><p>create table person1(<br>id int comment ‘唯一标识’,<br>name string comment ‘姓名’,<br>likes array<string>comment ‘爱好’,<br>address map&lt;string,string&gt; comment ‘住址’<br>)<br>partitioned by(age int)<br>row format delimited<br>fields terminated by “,”<br>collection items terminated by “-“<br>map keys terminated by “:”<br>lines terminated by “\n”;</p>
<h5 id="双分区"><a href="#双分区" class="headerlink" title="双分区:"></a>双分区:</h5><p>create table person2(<br>id int comment ‘唯一标识’,<br>name string comment ‘姓名’,<br>likes array<string>comment ‘爱好’,<br>address map&lt;string,string&gt; comment ‘住址’<br>)<br>partitioned by(age int,sex string)<br>row format delimited<br>fields terminated by “,”<br>collection items terminated by “-“<br>map keys terminated by “:”<br>lines terminated by “\n”;</p>
<h2 id="Hbase的概述与安装"><a href="#Hbase的概述与安装" class="headerlink" title="Hbase的概述与安装"></a>Hbase的概述与安装</h2><p>hbase是以hdfs为数据存储的一种分布式的非关系型的，可扩展的nosql数据库</p>
<p>关系型数据库和非关系型数据库的区别</p>
<h5 id="1-存储方式和存储结构不同"><a href="#1-存储方式和存储结构不同" class="headerlink" title="1.存储方式和存储结构不同"></a>1.存储方式和存储结构不同</h5><p>关系型数据库是以二维表格的形式来存储数据，这样的存储结构比较固定规整</p>
<h5 id="2-查询数据的方式不同"><a href="#2-查询数据的方式不同" class="headerlink" title="2.查询数据的方式不同"></a>2.查询数据的方式不同</h5><p>关系型数据库是通过sql语句来对表中的数据进行精确查询</p>
<p>非关系型数据库只能通过rowkey的检索来对数据进行查询</p>
<p>分别的优势：</p>
<p>关系型数据库对于一些比较复杂的查询可以更加准确</p>
<p>非关系型数据库最大的优势就是速度快 效率高 但是准确度和安全度没那么高 适用于大规模的数据读写</p>
<p> 常用的关系型数据库：MySQL，Oracle，server<br>常用的非关系型数据库：hbase，redis，MongoDB； </p>
<h4 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h4><h5 id="namespace："><a href="#namespace：" class="headerlink" title="namespace："></a>namespace：</h5><p>命名空间，类似与mysql里面的database的概念 每个namespace可以有多张表 hbase自带两个命名空间 default，hbase </p>
<p>hbase里面存放的是hbase的内置表 default是用户默认使用的命名空间</p>
<h5 id="Table："><a href="#Table：" class="headerlink" title="Table："></a>Table：</h5><p>类似于mysql里的表的概念 但是不是二维表 他定义table的时候只需要声明他的列族就可以了 不需要去声明列 因为hbase在写入数据的时候字段是动态的 按你当下的需求来制定 所以hbase能够轻松的应对字段变更的场景</p>
<h5 id="row："><a href="#row：" class="headerlink" title="row："></a>row：</h5><p>hbase的table中每行数据都是由一个rowkey对应多个列（column）来组成的  他存储的数据是按照rowkey的字典顺序来存储的 所以他在查询的时候是去检索rowkey来查询的</p>
<h5 id="column："><a href="#column：" class="headerlink" title="column："></a>column：</h5><p>一个表可以理解成行的集合 行（记录）是列族的集合 列族是列的集合                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </p>
<h5 id="cell："><a href="#cell：" class="headerlink" title="cell："></a>cell：</h5><p> HBase的基本数据模型是Cell。Cell是一个表格的单元，用于存储数据。每一行都有一个唯一的行键，用于标识它。行键由一个或多个列族组成，列族是一组相关列的集合。列族中的每一列都有一个唯一的列名，用于标识它。 </p>
<h5 id="time-stamp："><a href="#time-stamp：" class="headerlink" title="time stamp："></a>time stamp：</h5><p>这个是用于标识数据的不同版本 以及每条列的写入时间 当某条数据写入的时候 系统会默认给他加上该time stamp字段 这个字段的值就是该数据写入hbase的时间</p>
<h4 id="hbase的基本架构"><a href="#hbase的基本架构" class="headerlink" title="hbase的基本架构"></a>hbase的基本架构</h4><h5 id="master："><a href="#master：" class="headerlink" title="master："></a>master：</h5><p>master部署在hadoop的namenode上 负责监控集群当中所有的RegionServer 管理元数据表格meta 接收用户对表格创建修改删除等等命令并且执行 它还可以监控Region是否需要负载均衡 还可以进行故障转移 因为他的实现类为HMaster 所以在namenode服务器上的进程名字就是HMaster</p>
<h5 id="RegionServer："><a href="#RegionServer：" class="headerlink" title="RegionServer："></a>RegionServer：</h5><p>RegionServer通常部署在datanode上 主要的作用是负责对cell的处理 比如cell数据的put get等等 </p>
<h4 id="安装流程："><a href="#安装流程：" class="headerlink" title="安装流程："></a>安装流程：</h4><p>在node1中下载hbase到apps  命令tar -zxvf hbase……. -C &#x2F;opt&#x2F;</p>
<p>将hbase名字修改简短一点例如hbase-0.98</p>
<p>cd进hbase</p>
<p>删除dosc  rm -rf docs</p>
<p>配置hbase环境变量</p>
<p>cd 进hbase中的conf</p>
<p>vim regionservers 将localhost修改为node1 node2 node3</p>
<p>出来输入echo “node2” &gt;&gt;backup-master</p>
<p>cat backup-master</p>
<p>修改hbase-env.sh(文件发给你直接覆盖)</p>
<p>到&#x2F;opt&#x2F;hadoop-2.6.5&#x2F;etc&#x2F;hadoop中找到hdfs-site.xml 复制到hbse中的conf</p>
<p>修改conf中的hbase-site.xml</p>
<hr>
  <property>

<p><name>hbase.cluster.distributed</name></p>
<p><value>true</value></p>
</property>

<property>

<p><name>hbase.rootdir</name></p>
<p><value>hdfs:&#x2F;&#x2F;mycluster&#x2F;hbase_ha</value></p>
</property>

<property>

<p><name>hbase.zookeeper.quorum</name></p>
<p><value>node2:2181,node3:2181,node4:2181</value></p>
</property>

<property>

<p><name>hbase.zookeeper.property.dataDir</name></p>
<p><value>&#x2F;var&#x2F;xinxi&#x2F;zookeeper&#x2F;data</value></p>
</property>  

<hr>
<p>传hbase到node2 3 4</p>
<p>scp -r &#x2F;opt&#x2F;hbase-0.98&#x2F; node2:&#x2F;opt&#x2F;</p>
<p>然后到node2上修改环境变量</p>
<p>传profile到node3 4</p>
<p>scp &#x2F;etc&#x2F;profile node3:&#x2F;etc&#x2F;</p>
<p>到node3 4中分别source一下</p>
<p>回到node1启动hadoop</p>
<p>start-dfs.sh</p>
<p>启动hbase</p>
<p>start-hbase.sh</p>
<p>到另外其中一台启动zkCli.sh</p>
<p>ls &#x2F;查看是否包含 zookper hadoop hive hbase</p>
<p>到浏览器中打开node1:60010</p>
<p>浏览器中连接到node2 3 4便成功</p>
<h2 id="Hbase常用命令"><a href="#Hbase常用命令" class="headerlink" title="Hbase常用命令"></a>Hbase常用命令</h2><p>1.hbase shell链接hbase的客户端</p>
<p>2.创建表 create’表名’,’列族名’</p>
<p>3.插入数据 put’表名’,’rowkey’,’列族名’,’列名’,’值’</p>
<p>4.查询某一条数据 get ‘表名’,’rowkey’,’列族名’,’列名’</p>
<p>5.查询表里数据的总条数 count ‘表名’</p>
<p>6.删除一条数据 delete ‘表名’,’rowkey’,’列族名’,’列名’</p>
<p>7.在确定删除某张表的时候必须先去把该表禁用了 disable ‘表名’ 然后再去删除才能成功 drop ‘表名’</p>
<p>8.查询表里所有的数据scan’表名’</p>
<p>9.添加一个新的列族 alter’表名’,’列族名’</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/03/663466c445a5b.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/03/663466c445a5b.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">唐思嘉</div><div class="post-copyright__author_desc">生活可爱，万物复苏</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/05/07/%E8%80%83%E8%AF%95/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/05/07/%E8%80%83%E8%AF%95/')">考试</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://bu.dusays.com/2024/05/03/6634c10294d31.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/03/6634c10294d31.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://bu.dusays.com/2024/05/03/6634c10292e7f.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/03/6634c10292e7f.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/05/07/%E8%80%83%E8%AF%95/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=考试&amp;url=http://example.com/2024/05/07/%E8%80%83%E8%AF%95/&amp;pic=https://pic4.zhimg.com/v2-6be8cc419c4945acd98736986d05e197_r.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Hello</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E8%80%83%E8%AF%95/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>考试<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2024/05/11/663f775625ed5.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/05/06/%E9%85%8D%E7%BD%AEnginx/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://nginx.org/nginx.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">配置nginx</div></div></a></div><div class="next-post pull-right"><a href="/2024/05/09/python%E7%88%AC%E8%99%AB%E5%88%9D%E4%BD%93%E9%AA%8C/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/09/663c68efef13c.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">爬虫初体验</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/05/06/%E9%85%8D%E7%BD%AEnginx/" title="配置nginx"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://nginx.org/nginx.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-05-06</div><div class="title">配置nginx</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/03/663466c445a5b.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">学习、项目、个人树屋</b>相关的内容，还有对新技术和未来的<b style="color:#fff">向往</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">唐思嘉</h1><div class="author-info__desc">生活可爱，万物复苏</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/TangGib" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1472012479" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-number">1.</span> <span class="toc-text">创建虚拟机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C"><span class="toc-number">2.</span> <span class="toc-text">配置网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5Xshell%EF%BC%8CXftp"><span class="toc-number">3.</span> <span class="toc-text">连接Xshell，Xftp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%85%8B%E9%9A%86"><span class="toc-number">4.</span> <span class="toc-text">虚拟机的克隆</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#host%E9%85%8D%E7%BD%AE"><span class="toc-number">4.1.</span> <span class="toc-text">host配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">4.2.</span> <span class="toc-text">关闭防火墙</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%97%ADsshd%E8%AE%A9ssh%E8%BF%9E%E6%8E%A5%E6%9B%B4%E5%BF%AB"><span class="toc-number">4.3.</span> <span class="toc-text">关闭sshd让ssh连接更快</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E5%AD%90%E5%AE%89%E5%85%A8%E7%B3%BB%E7%BB%9F"><span class="toc-number">4.4.</span> <span class="toc-text">关闭子安全系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87yum%E4%B8%8B%E8%BD%BDvim"><span class="toc-number">4.5.</span> <span class="toc-text">通过yum下载vim</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDntp%E6%A0%A1%E5%87%86%E6%97%B6%E9%97%B4"><span class="toc-number">4.6.</span> <span class="toc-text">下载ntp校准时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A470net-rules%E6%96%87%E4%BB%B6"><span class="toc-number">4.7.</span> <span class="toc-text">删除70net.rules文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%8D%E5%BF%AB%E7%85%A7%E5%85%8B%E9%9A%86"><span class="toc-number">4.8.</span> <span class="toc-text">拍快照克隆</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEnginx"><span class="toc-number">5.</span> <span class="toc-text">配置nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">6.</span> <span class="toc-text">nginx的负载均衡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx-session%E5%85%B1%E4%BA%AB"><span class="toc-number">7.</span> <span class="toc-text">nginx session共享</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%E5%92%8Czookeeper%E7%9A%84%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">免密登录和zookeeper的安装配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%85%8D%E5%AF%86"><span class="toc-number">8.1.</span> <span class="toc-text">四台服务器的免密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jdk%E5%AE%89%E8%A3%85%E4%B8%8Ezookeeper%E5%90%AF%E5%8A%A8"><span class="toc-number">8.2.</span> <span class="toc-text">jdk安装与zookeeper启动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hadoop%E5%8D%95%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">9.</span> <span class="toc-text">hadoop单机配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hadoop%E7%9A%84%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E5%A4%9A%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">10.</span> <span class="toc-text">hadoop的伪分布式多机配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E5%A4%9A%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">11.</span> <span class="toc-text">hadoop分布式多机配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hive-%E5%AE%89%E8%A3%85"><span class="toc-number"></span> <span class="toc-text">Hive 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hive%E8%AF%AD%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">Hive语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hive%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">0.1.</span> <span class="toc-text">hive的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">0.1.1.</span> <span class="toc-text">基础数据类型:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">0.1.2.</span> <span class="toc-text">复杂数据类型:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%EF%BC%9A"><span class="toc-number">0.2.</span> <span class="toc-text">创建表：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-number">0.3.</span> <span class="toc-text">查看表的详细信息：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hive%E8%A1%A8%E7%9A%84%E5%88%86%E5%8C%BA"><span class="toc-number"></span> <span class="toc-text">Hive表的分区</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-number">0.0.1.</span> <span class="toc-text">执行代码：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E5%88%86%E5%8C%BA%EF%BC%9A"><span class="toc-number">0.0.2.</span> <span class="toc-text">单分区：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E5%88%86%E5%8C%BA"><span class="toc-number">0.0.3.</span> <span class="toc-text">双分区:</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hbase%E7%9A%84%E6%A6%82%E8%BF%B0%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="toc-number"></span> <span class="toc-text">Hbase的概述与安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E5%92%8C%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84%E4%B8%8D%E5%90%8C"><span class="toc-number">0.0.1.</span> <span class="toc-text">1.存储方式和存储结构不同</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E5%BC%8F%E4%B8%8D%E5%90%8C"><span class="toc-number">0.0.2.</span> <span class="toc-text">2.查询数据的方式不同</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">0.1.</span> <span class="toc-text">数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#namespace%EF%BC%9A"><span class="toc-number">0.1.1.</span> <span class="toc-text">namespace：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Table%EF%BC%9A"><span class="toc-number">0.1.2.</span> <span class="toc-text">Table：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#row%EF%BC%9A"><span class="toc-number">0.1.3.</span> <span class="toc-text">row：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#column%EF%BC%9A"><span class="toc-number">0.1.4.</span> <span class="toc-text">column：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cell%EF%BC%9A"><span class="toc-number">0.1.5.</span> <span class="toc-text">cell：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#time-stamp%EF%BC%9A"><span class="toc-number">0.1.6.</span> <span class="toc-text">time stamp：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hbase%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84"><span class="toc-number">0.2.</span> <span class="toc-text">hbase的基本架构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#master%EF%BC%9A"><span class="toc-number">0.2.1.</span> <span class="toc-text">master：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#RegionServer%EF%BC%9A"><span class="toc-number">0.2.2.</span> <span class="toc-text">RegionServer：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-number">0.3.</span> <span class="toc-text">安装流程：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hbase%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number"></span> <span class="toc-text">Hbase常用命令</span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/11/%E5%B0%8F%E8%AF%B4%E7%88%AC%E8%99%AB/" title="小说爬虫"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/11/663f775625ed5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="小说爬虫"/></a><div class="content"><a class="title" href="/2024/05/11/%E5%B0%8F%E8%AF%B4%E7%88%AC%E8%99%AB/" title="小说爬虫">小说爬虫</a><time datetime="2024-05-11T13:45:39.000Z" title="发表于 2024-05-11 21:45:39">2024-05-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/09/python%E7%88%AC%E8%99%AB%E5%88%9D%E4%BD%93%E9%AA%8C/" title="爬虫初体验"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/05/09/663c68efef13c.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="爬虫初体验"/></a><div class="content"><a class="title" href="/2024/05/09/python%E7%88%AC%E8%99%AB%E5%88%9D%E4%BD%93%E9%AA%8C/" title="爬虫初体验">爬虫初体验</a><time datetime="2024-05-09T06:12:26.000Z" title="发表于 2024-05-09 14:12:26">2024-05-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/07/%E8%80%83%E8%AF%95/" title="考试"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic4.zhimg.com/v2-6be8cc419c4945acd98736986d05e197_r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="考试"/></a><div class="content"><a class="title" href="/2024/05/07/%E8%80%83%E8%AF%95/" title="考试">考试</a><time datetime="2024-05-07T06:39:47.000Z" title="发表于 2024-05-07 14:39:47">2024-05-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/06/%E9%85%8D%E7%BD%AEnginx/" title="配置nginx"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://nginx.org/nginx.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="配置nginx"/></a><div class="content"><a class="title" href="/2024/05/06/%E9%85%8D%E7%BD%AEnginx/" title="配置nginx">配置nginx</a><time datetime="2024-05-06T09:26:01.000Z" title="发表于 2024-05-06 17:26:01">2024-05-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/04/Hbase%E5%91%BD%E4%BB%A4/" title="Hbase常用命令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hbase.apache.org/images/hbase_logo_with_orca_large.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hbase常用命令"/></a><div class="content"><a class="title" href="/2024/05/04/Hbase%E5%91%BD%E4%BB%A4/" title="Hbase常用命令">Hbase常用命令</a><time datetime="2024-05-04T07:29:16.000Z" title="发表于 2024-05-04 15:29:16">2024-05-04</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 By <a class="footer-bar-link" href="/" title="唐思嘉" target="_blank">唐思嘉</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">3</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_63165470?type=blog" title="个人博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人博客"/><span class="back-menu-item-text">个人博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://7bu.top/" title="个人图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="个人图床"/><span class="back-menu-item-text">个人图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Hbase/" style="font-size: 0.88rem;">Hbase<sup>1</sup></a><a href="/tags/nginx/" style="font-size: 0.88rem;">nginx<sup>1</sup></a><a href="/tags/%E4%BD%9C%E4%B8%9A/" style="font-size: 0.88rem;">作业<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 0.88rem;">测试<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 0.88rem;">爬虫<sup>1</sup></a><a href="/tags/%E8%80%83%E8%AF%95/" style="font-size: 0.88rem;">考试<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("05/03/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 唐思嘉 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 唐思嘉 %c 你正在访问 唐思嘉 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("05/03/2024 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://bzlza-twikoo.hf.space',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://bzlza-twikoo.hf.space',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://bzlza-twikoo.hf.space',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "Anoniem@silent.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>